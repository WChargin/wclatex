\ProvidesPackage{wcmath}

% standard dependencies
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsfonts}
\RequirePackage{amsthm}

% aliases for blackboard, calligraphic fonts
\newcommand{\mB}{\mathbb}
\newcommand{\mC}{\mathcal}
%\renewcommand{\mapsto}{\longmapsto}

% vectors: bold, not arrow (but \arrowvec kept in case)
\let\arrowvec\vec
\renewcommand{\vec}[1]{\boldsymbol{\mathbf{#1}}} % include boldsymbol for Greek

% for use in align*, gather*, etc.; opposite of \nonumber
\newcommand{\numberthis}{\addtocounter{equation}{1}\tag{\theequation}}

% asymptotic notation
\newcommand{\bigO}{\mC O}
\newcommand{\bigTheta}{\Theta}

% statistics: expected value, variance, median
\DeclareMathOperator{\expect}{E}
\DeclareMathOperator{\var}{Var}
\DeclareMathOperator{\prob}{P}
\newcommand{\mean}{\bar}
\newcommand{\widemean}{\overline}
\newcommand{\median}{\tilde}
\newcommand{\widemedian}{\widetilde}
\newcommand{\trimmed}[1]{\operatorname{tr}(#1)}
\newcommand{\estimate}[1]{\widetilde{#1}}
\newcommand{\stratified}[1]{\operatorname{str}}
\newcommand{\given}{\mid}

% statistics: sum of squared stuff
\newcommand{\sumsquare}[1]{\mathrm{SS}_{\mathrm{#1}}}
\newcommand{\SSresid}{\sumsquare{resid}}
\newcommand{\SStotal}{\sumsquare{total}}

% statistics: distributions
\newcommand{\@distribution@name}[1]{\mathrm{#1}}
\newcommand{\Exp}{\@distribution@name{Exp}} % exponential
\newcommand{\Bin}{\@distribution@name{Bin}} % binomial
\newcommand{\Pois}{\@distribution@name{Pois}} % Poisson
\newcommand{\Nor}{\@distribution@name{\mathcal{N}}} % normal
\newcommand{\Lgn}{\@distribution@name{Log}\text{-}\Nor} % lognormal
\newcommand{\Unif}{\@distribution@name{\mathcal{U}}} % uniform
\newcommand{\Chisq}{\@distribution@name{\chi}^2} % chi-squared
\newcommand{\Wbl}{\@distribution@name{Weibull}} % Weibull

% linear algebra
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\nullspace}{\mathcal{N}}
\newcommand{\mat}[1]{\boldsymbol{\mathbf{#1}}} % analogous to vec
\newcommand{\basis}[1]{\vec e_{#1}} % basis vector
\newcommand{\T}[1]{{#1}^T\!} % matrix transpose

% optimization: minimize, subject to
\DeclareMathOperator*{\minimize}{minimize}
\DeclareMathOperator*{\subjto}{subject\ to}

% optimization environment for proper spacing
% usage, in text mode:
% \begin{optimization}
%   \minimize_{x, y} & f(x, y) \\
%   \subjto & g(x) = 0 \\
%           & h(y) = 0
% \end{optimization}
\RequirePackage{array}
\newcolumntype{R}{>{\displaystyle}r}
\newcolumntype{L}{>{\displaystyle}l}
\newenvironment{optimization}{%
  \[%
  \renewcommand{\arraystretch}{1.5}%
  \begin{array}{R@{\quad}L}%
}{%
  \end{array}%
  \]%
}

% the end of proofs (in theorem, use qedhere instead, if at all)
\newcommand*{\proofdone}[0]{\hfill$\square$}

% absolute value and vector norm
\RequirePackage{mathtools}
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}

% Swap the definitions of \abs* and \norm* with their respective starred
% variants, so that \abs and \norm resize delimiters, and the starred variants
% do not.
\let\old@abs\abs
\def\abs{\@ifstar{\old@abs}{\old@abs*}}

\let\old@norm\norm
\def\norm{\@ifstar{\old@norm}{\old@norm*}}
